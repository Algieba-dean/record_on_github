# **Tips about registers**
##### *關於寄存器的一些概念*
---
> 起因：今天在用vs2017進行代碼編譯的過程中，調試的工具裡面也有寄存器，雖然之前有粗略地知道寄存器，但是不是很能理解eax，ebx這些寄存器的意思，感覺有一些內在的區別在裡面，這些內容應當是在彙編中學習的，但是由於暫時還未接觸過彙編語言，但是既然用C語言要進行底層內存的操作，固然是對寄存器的知識有一點大致的了解比較好，故此進行資料的補充和查閱。  
---
> 在vs的調試工具中顯示有EAX，EBX，ECX，EDX諸寄存器，乍看之下，似乎類似與寄存器A，B，C，D之流，但是其後的ESI，EDI，EIP，ESP，EBP，EFL似乎又不同於前面幾個寄存器，故此發問。進行深層的查閱。
發現，如果要講寄存器EAX之流，需要先從AX之流引入，AX，BX，CX，DX是一般的寄存器，但是這四者又有區別，且並非此前想象的那種ABCD的編碼順序，而是字母各自有其特殊的含義在其中。以下進行說明。

```
首先，此四類均為 一般寄存器，AX，A取自accumulate（猜想應當是以此為詞根），故A名為累積暫存器，具體用法，在之後EAX中詳述，待補。BX，B取自base，名為基底暫存器，CX，C取自count，名為計數暫存器，DX，D取自data，意為數據暫存器。
由這四個一般寄存器，在X86平台上延伸為32位CPU寄存器。
EAX：累加器，大多數加法和乘法的默認寄存器（嗯？大多數，難道還有特殊情況，可以查閱一下）
     用以保存所有API函數的返回值。
EBX: 基地址在內存尋址時存放基地址（emmmm，基地址，沒學過彙編語言，應該是說的取一個地址的基點，參考點之類的，先存疑，有待查證）
     作為存儲器指針使用
ECX:計數器，REP（重複）前綴指令，LOOP指令的內定寄存器（大概是描述類似於for循環中的重複和循環指令）
     在循環和字符串操作時（循環可以理解，字符串，嗯，字符串操作時，也是對一組單字符進行循環操作，也可以理解），用以控制循環次數（控制？控制是還可以改變咯？即是記錄循環次數嗎？）；另外，在進行位操作時，移動多位（重點，多位，就是還是需要有一點循環的，計數的意思，故此才會使用牠），用CL來指明移動位數。
EDX:數據寄存器，用以存放整數除法產生的餘數（emmm，沒有別的用了？所以這個餘數重要性在於什麼呢？）
     。進行乘除運算時，作為默認的操作數參與運算（也就是說，被當做一個乘除運算的數值，emm，所以有什麼用嗎？喵喵喵？），還可以存放I/O的端口地址
```
---
> ESI和EDI是一組對應的寄存器（查閱得知），ESP和EBP是一組對應寄存器，剩下 EIP和EFL需要進行深究。

```
ESI和EDI呢，其對應面，或者說對應點，在於一個是源，一個是目，即成S和D的區別，然其具體的功能呢？一說是用以複製內存，按類分，AX-DX都屬於通用的寄存器，SI和DI屬於變址寄存器，SP和BP屬於指針寄存器（可能是因為後面是以P,pointer結尾的緣故）IP屬於控制，FL應當是和flag同源，是標誌的意思。
回到ESI和EDI上，經過查閱發現，其二者為（source/destination index），即源索引和目索引。索引，即是同目錄相近的東西，也就是一個指向性，門牌號似的東西，用於指向。

ESP和EBP呢，就比較清晰明了，其作用分別是指向棧內存的地址，一者在高位，標誌著棧的頂端，一者在低位，標誌著棧的底端。如若想要對一個程序進行反彙編翻譯，那麼這兩個寄存器就尤為重要，因為棧是存放臨時變量的地方，也就是函數的地方，主函數也是函數，一個程序的入口，會是研究一段程序的關鍵口（連門都找不到，就莫要談其他的了）。棧的概念，由於沒有過深的理論基礎，由此進行過一點了解，在此廢話幾句，棧是較之內存，可以運算更快的“內存”，但是其空間會很小，且其增長方向是與內存的增長方向相反（故此會發生棧溢出，棧的空間可能會和碰撞之類，或者其他溢出問題）。在查閱寄存器相關概念（即對自己做這篇知識擴充）過程中，看到一個很好的比喻，棧就像是一堆撲克牌，PUSH即是為棧在頂上多加一個元素，POP即從棧頂端抽走一個元素。ESP寄存器，永遠指向棧頂，EBP寄存器，永遠指向棧底。

EFL，用於顯示很多控制信息的寄存器，進位，奇偶，方向，中斷等等，（稍微有點複雜，在這篇作為一個知識延伸的東西裏，會顯得比較累贅，故此，後期如有深究，再進行補充吧）
EIP，這個寄存器比較厲害，用以存放下一指令的地址，所以會比較重要咯。
```
